[
  "varying vec2 vTextureCoord;",

  "uniform sampler2D uSampler;",
  "uniform float value;",

  "vec2 fishEye(float side) {",
  "  vec2 middle = vec2(0.5, 0.5);",
  "  vec2 d = vTextureCoord - middle;",

  "  float dist = sqrt(dot(d, d));",
  "  float bind = sqrt(dot(middle, middle));",
  "  float mul = value * side;",

  "  return middle + normalize(d) * tan(dist * mul) * bind / tan( bind * mul);",
  "}",

  "void main(void) {",
  "  float R = texture2D(uSampler, vTextureCoord).r;",
  "  float G = texture2D(uSampler, fishEye(1.0)).g;",
  "  float B = texture2D(uSampler, fishEye(-1.0)).b;",

  "  gl_FragColor = vec4(R, G, B, 1.0);",
  "}"
]
